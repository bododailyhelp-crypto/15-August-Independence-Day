<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Aviator Game</title>
    <!-- QR ‡§ï‡•ã‡§° ‡§¨‡§®‡§æ‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§è‡§ï ‡§µ‡§ø‡§∂‡•ç‡§µ‡§∏‡§®‡•Ä‡§Ø ‡§≤‡§æ‡§á‡§¨‡•ç‡§∞‡•á‡§∞‡•Ä ‡§ú‡•ã‡§°‡§º‡•Ä ‡§ó‡§à -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

    <!-- === FIREBASE SDKs === -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <!-- ======================= -->

    <style>
        /* CSS ‡§∏‡•ç‡§ü‡§æ‡§á‡§≤‡§ø‡§Ç‡§ó */
        * { box-sizing: border-box; }
        html, body { height: 100vh; width: 100vw; margin: 0; padding: 0; overflow: hidden; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #101018; color: #f1f1f1; display: flex; justify-content: center; align-items: center; }
        #game-container { position: relative; width: 98vw; height: 95vh; max-width: 1400px; max-height: 850px; background: #1a1a2e; padding: 15px; display: flex; flex-direction: column; text-align: center; border-radius: 15px; border: 1px solid rgba(255, 255, 255, 0.1); box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4); }
        #withdrawal-container, #wallet-container {  position: absolute; top: 15px; background: #2a2a4e; padding: 4px 10px; border-radius: 15px;  display: flex; align-items: center; gap: 6px; border: 1px solid rgba(255, 255, 255, 0.1); z-index: 10; cursor: pointer; }
        #withdrawal-container { left: 15px; }
        #wallet-container { right: 15px; cursor: pointer; }
        h1 { margin: 0 0 10px 0; font-size: 1.2em; }
        #game-screen { position: relative; height: 40vh; /* ‡§ä‡§Ç‡§ö‡§æ‡§à ‡§•‡•ã‡§°‡§º‡•Ä ‡§ï‡§Æ ‡§ï‡•Ä ‡§ó‡§à */ width: 100%; background: #2a2a4e; border-radius: 15px; overflow: hidden; margin-bottom: 15px; }
        #airplane-container { position: absolute; bottom: 5px; left: 10px; font-size: 30px; transition: all 0.05s linear; z-index: 2; }
        #multiplier { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 4em; font-weight: bold; color: #ffffff; width: 100%; }
        
        /* === ‡§Ø‡§π ‡§¨‡§¶‡§≤‡§æ‡§µ ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ ‡§π‡•à === */
        #controls { 
            display: grid; 
            grid-template-columns: 1fr 1fr; 
            gap: 10px; 
            flex: 1; /* ‡§Ø‡§π ‡§∏‡•Å‡§®‡§ø‡§∂‡•ç‡§ö‡§ø‡§§ ‡§ï‡§∞‡•á‡§ó‡§æ ‡§ï‡§ø ‡§Ø‡§π ‡§¨‡§ö‡•Ä ‡§π‡•Å‡§à ‡§ú‡§ó‡§π ‡§≤‡•á ‡§≤‡•á */
            min-height: 0; /* ‡§´‡•ç‡§≤‡•á‡§ï‡•ç‡§∏‡§¨‡•â‡§ï‡•ç‡§∏ ‡§ï‡•Ä ‡§è‡§ï ‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ ‡§ï‡•ã ‡§†‡•Ä‡§ï ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è */
        }
        /* ============================ */

        .betting-panel { background: #2a2a4e; padding: 15px; border-radius: 10px; display: flex; flex-direction: column; }
        .quick-bet-container { display: flex; gap: 5px; margin-bottom: 8px; }
        .quick-bet-btn { background-color: #3a3a5e; border: 1px solid rgba(255, 255, 255, 0.2); padding: 5px; font-size: 12px; flex-grow: 1; border-radius: 4px; color: white; cursor: pointer; }
        .control-row { display: flex; gap: 10px; margin-bottom: 10px; }
        input[type="number"], input[type="text"] { padding: 10px; border: 1px solid rgba(255, 255, 255, 0.2); background-color: #1a1a2e; color: white; border-radius: 4px; width: 100%; text-align: center; }
        .action-button { width: 100%; padding: 12px 5px; font-size: 16px; font-weight: bold; border: none; border-radius: 8px; cursor: pointer; }
        .bet-button { background-color: #28a745; color: white;}
        .bet-button:disabled { background-color: #5a6268; }
        .cashout-button { background-color: #ffc107; color: #212529; display: none; }
        .panel-message { margin-top: 10px; font-size: 1.1em; font-weight: bold; color: #d1d5db; min-height: 25px; }
        .modal { display: none; position: fixed; z-index: 100; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.6); }
        .modal-content { background-color: #2a2a4e; margin: 10% auto; padding: 25px; border: 1px solid rgba(255,255,255,0.2); width: 90%; max-width: 450px; border-radius: 15px; text-align: center; position: relative; }
        .close-button { color: #aaa; position: absolute; top: 10px; right: 20px; font-size: 28px; font-weight: bold; cursor: pointer; }
        .modal-content input { margin-bottom: 15px; }
        .modal-content button { width: 100%; padding: 10px 15px; border: none; border-radius: 5px; cursor: pointer; font-size: 16px; }
        .modal-content h2 { margin-top: 0; margin-bottom: 20px;}
        .modal-content p.instruction { margin-top: 0; margin-bottom: 20px; font-size: 14px; color: #aaa; }
        .quick-deposit-container { margin-bottom: 15px; }
        .quick-deposit-row { display: flex; gap: 10px; }
        .quick-deposit-row:first-child { margin-bottom: 10px; }
        .quick-deposit-btn { background-color: #3a3a5e; border: 1px solid rgba(255, 255, 255, 0.2); padding: 10px; font-size: 14px; flex-grow: 1; border-radius: 4px; color: white; cursor: pointer; }
        .quick-deposit-btn.small-btn { flex-grow: 0.1; }
        #pending-requests-container { margin-top: 15px; background: #101018; border-radius: 10px; padding: 10px; height: 120px; overflow-y: auto; text-align: left; border: 1px solid rgba(255, 255, 255, 0.1); }
        #requests-list { list-style: none; padding: 0; margin: 0; }
        .request-item { display: flex; justify-content: space-between; align-items: center; padding: 10px; border-bottom: 1px solid #3a3a5e; font-size: 14px; }
        .request-item:last-child { border-bottom: none; }
        .request-details { flex-grow: 1; display: flex; align-items: center; gap: 8px;}
        .request-type { padding: 2px 6px; border-radius: 4px; font-size: 10px; font-weight: bold; color: white; }
        .request-type.deposit { background-color: #28a745; }
        .request-type.withdrawal { background-color: #007bff; }
        .request-status { font-size: 12px; font-weight: bold; color: #ffc107; }
        #withdrawal-message { min-height: 20px; margin-top: 10px; color: #28a745; font-weight: bold; }
        #qrcode { display: flex; justify-content: center; padding: 20px; background: white; border-radius: 10px; }
    </style>
</head>
<body>
    <div id="game-container">
        <div id="withdrawal-container">üí∏ Withdrawal</div>
        <div id="wallet-container">üí≥<span id="wallet-balance">‚Çπ0.00</span></div>
        <h1>üöÄ Aviator</h1>
        <div id="game-screen">
             <div id="airplane-container">üöÄ</div>
             <div id="multiplier">1.00x</div>
        </div>
        <div id="controls">
            <div class="betting-panel" data-panel-id="0"> <div class="quick-bet-container"> <button class="quick-bet-btn" data-amount="10">‚Çπ10</button> <button class="quick-bet-btn" data-amount="100">‚Çπ100</button> <button class="quick-bet-btn" data-amount="500">‚Çπ500</button> </div> <div class="control-row"><input type="number" class="bet-amount" value="10" min="1"></div> <button class="action-button bet-button">Place Your Bet</button> <button class="action-button cashout-button">Cash Out</button> <div class="panel-message"></div> </div>
            <div class="betting-panel" data-panel-id="1"> <div class="quick-bet-container"> <button class="quick-bet-btn" data-amount="1000">‚Çπ1000</button> <button class="quick-bet-btn" data-amount="3000">‚Çπ3000</button> <button class="quick-bet-btn" data-amount="5000">‚Çπ5000</button> </div> <div class="control-row"><input type="number" class="bet-amount" value="10" min="1"></div> <button class="action-button bet-button">Place Your Bet</button> <button class="action-button cashout-button">Cash Out</button> <div class="panel-message"></div> </div>
        </div>
        <div id="pending-requests-container">
            <ul id="requests-list"></ul>
        </div>
    </div>

    <!-- Modals (Deposit, Withdrawal, QR Code) -->
    <div id="deposit-modal" class="modal"> 
        <div class="modal-content"> 
            <span class="close-button" id="close-deposit-modal">&times;</span> 
            <h2>Add Funds</h2> 
            <p class="instruction"></p>
            <input type="number" id="deposit-amount" placeholder="Enter Amount"> 
            <div class="quick-deposit-container">  
                <div class="quick-deposit-row"> <button class="quick-deposit-btn" data-amount="100">‚Çπ100</button> <button class="quick-deposit-btn" data-amount="200">‚Çπ200</button> <button class="quick-deposit-btn" data-amount="500">‚Çπ500</button> <button class="quick-deposit-btn" data-amount="1000">‚Çπ1000</button> </div> 
                <div class="quick-deposit-row"> <button class="quick-deposit-btn" data-amount="2000">‚Çπ2000</button> <button class="quick-deposit-btn" data-amount="3000">‚Çπ3000</button> <button class="quick-deposit-btn" data-amount="5000">‚Çπ5000</button> <button class="quick-deposit-btn small-btn" data-amount="10000">‚Çπ10000</button> </div> 
            </div> 
            <button id="add-funds-btn" style="background-color: #28a745;">Add Amount</button> 
        </div> 
    </div>
    <div id="withdrawal-modal" class="modal"> <div class="modal-content"> <span class="close-button" id="close-withdrawal-modal">&times;</span> <h2>Withdrawal</h2> <input type="number" id="withdrawal-amount" placeholder="Amount"> <input type="text" id="upi-id" placeholder="YOUR UPI ID"> <button id="process-withdrawal-btn" style="background-color: #007bff;">Withdrawal Now</button> <p id="withdrawal-message"></p> </div> </div>
    <div id="qr-code-modal" class="modal"> <div class="modal-content"> <span class="close-button" id="close-qr-modal">&times;</span> <h2>Scan to Pay</h2> <p>Complete your payment of <strong id="qr-amount"></strong> using any UPI app.</p> <div id="qrcode"></div> <p style="margin-top: 15px; font-size: 14px; color: #aaa;">After payment, your request will be processed. You can close this window.</p> </div> </div>

    <script>
        // === FIREBASE CONFIGURATION ===
        const firebaseConfig = {
            apiKey: "AIzaSyD6TJaaKB3was0JZsCbivLpO9f970ERbdA",
            authDomain: "bodo-movie.firebaseapp.com",
            databaseURL: "https://bodo-movie-default-rtdb.firebaseio.com",
            projectId: "bodo-movie",
            storageBucket: "bodo-movie.firebasestorage.app",
            messagingSenderId: "637580228534",
            appId: "1:637580228534:web:7993b9ff88a78d2df2f317"
        };
        
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
        // ==============================

        const multiplierDisplay = document.getElementById('multiplier'),
              walletBalanceDisplay = document.getElementById('wallet-balance'),
              gameScreen = document.getElementById('game-screen'),
              airplaneContainer = document.getElementById('airplane-container'),
              bettingPanels = document.querySelectorAll('.betting-panel');

        const userId = "user123"; 

        let gameState = "waiting", walletBalance = 0.00, multiplier = 1.00, gameInterval;
        let bets = [ { amount: 0, cashedOut: false, cashedOutMultiplier: 0 }, { amount: 0, cashedOut: false, cashedOutMultiplier: 0 } ];
        
        const walletRef = database.ref(`users/${userId}/wallet`);
        const requestsRef = database.ref(`users/${userId}/requests`);

        walletRef.on('value', (snapshot) => {
            const val = snapshot.val();
            if (val === null) {
                walletRef.set(0.00); 
            } else {
                walletBalance = parseFloat(val);
                updateWalletDisplay();
            }
        });

        requestsRef.orderByChild('timestamp').on('value', (snapshot) => {
            const requests = [];
            snapshot.forEach((childSnapshot) => {
                requests.push({ id: childSnapshot.key, ...childSnapshot.val() });
            });
            renderPendingRequests(requests.reverse()); 
        });

        function updateWalletDisplay() {
            walletBalanceDisplay.textContent = `‚Çπ${walletBalance.toFixed(2)}`;
        }
        
        function resetVisuals() {
            multiplier = 1.00; multiplierDisplay.style.color = "#ffffff"; multiplierDisplay.style.fontSize = "4em";
            airplaneContainer.style.display = 'block'; airplaneContainer.style.transform = "rotate(0rad)";
            airplaneContainer.style.bottom = "5px"; airplaneContainer.style.left = "10px";
        }
        
        function gameCycle() {
            resetVisuals(); gameState = "waiting";
            bets.forEach((bet, index) => { bet.amount = 0; bet.cashedOut = false; bet.cashedOutMultiplier = 0; updatePanelUI(index, "waiting"); });
            let countdown = 5; multiplierDisplay.style.fontSize = "1.5em"; multiplierDisplay.textContent = `Next round in ${countdown} second`;
            const countdownInterval = setInterval(() => {
                countdown--;
                if (countdown > 0) multiplierDisplay.textContent = `Next round in ${countdown} second`; else multiplierDisplay.textContent = ``;
                if (countdown <= 0) { clearInterval(countdownInterval); startFlight(); }
            }, 1000);
        }
        
        function startFlight() {
            gameState = "running"; multiplierDisplay.style.fontSize = "4em";
            bets.forEach((bet, index) => { if (bet.amount > 0) updatePanelUI(index, "running"); });
            let x = 10; let screenWidth = gameScreen.clientWidth; let screenHeight = gameScreen.clientHeight;
            gameInterval = setInterval(() => {
                multiplier += 0.01 + .02 * (multiplier - 1); multiplierDisplay.textContent = `${multiplier.toFixed(2)}x`; x += 1.5;
                let y = ((screenHeight - 100) / (screenWidth * screenWidth)) * x * x + 5;
                airplaneContainer.style.left = `${x}px`; airplaneContainer.style.bottom = `${y}px`;
                bets.forEach((bet, index) => { if (bet.amount > 0 && !bet.cashedOut) { bettingPanels[index].querySelector('.cashout-button').textContent = `Cash Out ‚Çπ${(bet.amount * multiplier).toFixed(2)}`; } });
                if (Math.random() < 0.005 || x > screenWidth - 50) crashGame();
            }, 50);
        }
        
        function crashGame() {
            clearInterval(gameInterval); gameState = "crashed"; airplaneContainer.style.display = 'none'; 
            multiplierDisplay.textContent = "Flew Away"; multiplierDisplay.style.color = "#e63946";
            bets.forEach((bet, index) => {
                if (bet.amount > 0 && !bet.cashedOut) updatePanelUI(index, "lost");
                else if (bet.amount > 0 && bet.cashedOut) updatePanelUI(index, "won");
            });
            setTimeout(gameCycle, 3000);
        }
        
        function updatePanelUI(index, state) {
            const panel = bettingPanels[index], betButton = panel.querySelector('.bet-button'), cashoutButton = panel.querySelector('.cashout-button'), input = panel.querySelector('.bet-amount'), quickBtns = panel.querySelectorAll('.quick-bet-btn'), message = panel.querySelector('.panel-message');
            switch(state) {
                case "waiting": betButton.style.display = 'block'; cashoutButton.style.display = 'none'; betButton.disabled = false; input.disabled = false; quickBtns.forEach(b => b.disabled = false); message.textContent = ""; break;
                case "bet_placed": betButton.disabled = true; input.disabled = true; quickBtns.forEach(b => b.disabled = true); message.textContent = ""; break;
                case "running": betButton.style.display = 'none'; cashoutButton.style.display = 'block'; cashoutButton.disabled = false; message.textContent = ""; break; 
                case "cashed_out": cashoutButton.disabled = true; message.textContent = `‚Çπ${(bets[index].amount * bets[index].cashedOutMultiplier).toFixed(2)} You Win`; break;
                case "lost": betButton.style.display = 'block'; cashoutButton.style.display = 'none'; message.textContent = `You ‚Çπ${bets[index].amount} Lost`; break;
                case "won": betButton.style.display = 'block'; cashoutButton.style.display = 'none'; message.textContent = `‚Çπ${(bets[index].amount * bets[index].cashedOutMultiplier).toFixed(2)} ‡§™‡§∞ ‡§ú‡•Ä‡§§‡•á!`; break;
            }
        }
        
        bettingPanels.forEach((panel, index) => {
            const betButton = panel.querySelector('.bet-button'), cashoutButton = panel.querySelector('.cashout-button'), input = panel.querySelector('.bet-amount'), quickBtns = panel.querySelectorAll('.quick-bet-btn');
            quickBtns.forEach(button => button.addEventListener('click', () => { input.value = button.dataset.amount; }));
            
            betButton.addEventListener("click", () => {
                if (gameState !== "waiting" || bets[index].amount > 0) return;
                const betValue = parseFloat(input.value);
                if (isNaN(betValue) || betValue <= 0) {
                    alert("‡§ï‡•É‡§™‡§Ø‡§æ ‡§è‡§ï ‡§µ‡•à‡§ß ‡§¨‡•á‡§ü ‡§∞‡§æ‡§∂‡§ø ‡§°‡§æ‡§≤‡•á‡§Ç‡•§");
                    return;
                }
                if (walletBalance < betValue) {
                    alert("‡§Ü‡§™‡§ï‡•á ‡§ñ‡§æ‡§§‡•á ‡§Æ‡•á‡§Ç ‡§™‡§∞‡•ç‡§Ø‡§æ‡§™‡•ç‡§§ ‡§¨‡•à‡§≤‡•á‡§Ç‡§∏ ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§ñ‡•á‡§≤‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∞‡§æ‡§∂‡§ø ‡§ú‡§Æ‡§æ ‡§ï‡§∞‡•á‡§Ç‡•§");
                    return;
                }
                walletRef.set(walletBalance - betValue); 
                bets[index].amount = betValue; 
                updatePanelUI(index, "bet_placed");
            });

            cashoutButton.addEventListener("click", () => {
                if (gameState === "running" && bets[index].amount > 0 && !bets[index].cashedOut) {
                    bets[index].cashedOut = true; bets[index].cashedOutMultiplier = multiplier;
                    const winnings = bets[index].amount * multiplier;
                    walletRef.set(walletBalance + winnings);
                    updatePanelUI(index, "cashed_out");
                }
            });
        });

        const requestsList = document.getElementById('requests-list');
        function renderPendingRequests(pendingRequests) {
            requestsList.innerHTML = '';
            if (!pendingRequests || pendingRequests.length === 0) { 
                requestsList.innerHTML = '<p style="text-align:center; font-size:12px; color:#aaa;">‡§ï‡•ã‡§à ‡§≤‡§Ç‡§¨‡§ø‡§§ ‡§Ö‡§®‡•Å‡§∞‡•ã‡§ß ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à</p>';
                return; 
            }
            pendingRequests.forEach(request => {
                const li = document.createElement('li');
                li.className = 'request-item';
                let detailsHTML = '';
                if (request.type === 'deposit') {
                    detailsHTML = `<span class="request-type deposit">DEPOSIT</span> <span><strong>‚Çπ${request.amount.toFixed(2)}</span>`;
                } else { // This will now handle withdrawal
                    detailsHTML = `<span class="request-type withdrawal">WITHDRAWAL</span> <span><strong>‚Çπ${request.amount.toFixed(2)}</strong> to ${request.upiId}</span>`;
                }
                li.innerHTML = `<div class="request-details">${detailsHTML}</div> <div class="request-status">${request.status || 'Pending'}</div>`;
                requestsList.appendChild(li);
            });
        }

        window.onload = () => {
            gameCycle(); 

            const myUpiId = "your-actual-upi-id@ybl"; 

            const depositModal = document.getElementById('deposit-modal');
            const withdrawalModal = document.getElementById('withdrawal-modal');
            const qrCodeModal = document.getElementById('qr-code-modal');
            const walletBtn = document.getElementById('wallet-container');
            const withdrawalBtn = document.getElementById('withdrawal-container');
            const closeDepositBtn = document.getElementById('close-deposit-modal');
            const closeWithdrawalBtn = document.getElementById('close-withdrawal-modal');
            const closeQrBtn = document.getElementById('close-qr-modal');
            const addFundsBtn = document.getElementById('add-funds-btn');
            const depositAmountInput = document.getElementById('deposit-amount');
            const qrCodeContainer = document.getElementById('qrcode');
            const qrAmountDisplay = document.getElementById('qr-amount');
            
            const processWithdrawalBtn = document.getElementById('process-withdrawal-btn');
            const withdrawalAmountInput = document.getElementById('withdrawal-amount');
            const userUpiIdInput = document.getElementById('upi-id');
            const withdrawalMessage = document.getElementById('withdrawal-message');

            walletBtn.addEventListener('click', () => { depositModal.style.display = 'block'; });
            withdrawalBtn.addEventListener('click', () => { 
                withdrawalMessage.textContent = '';
                withdrawalModal.style.display = 'block'; 
            });

            closeDepositBtn.addEventListener('click', () => { depositModal.style.display = 'none'; });
            closeWithdrawalBtn.addEventListener('click', () => { withdrawalModal.style.display = 'none'; });
            closeQrBtn.addEventListener('click', () => { qrCodeModal.style.display = 'none'; });
            
            window.addEventListener('click', (event) => {
                if (event.target == depositModal) depositModal.style.display = 'none';
                if (event.target == withdrawalModal) withdrawalModal.style.display = 'none';
                if (event.target == qrCodeModal) qrCodeModal.style.display = 'none';
            });
            
            document.querySelectorAll('.quick-deposit-btn').forEach(button => {
                button.addEventListener('click', (e) => {
                    depositAmountInput.value = e.target.dataset.amount;
                });
            });

            addFundsBtn.addEventListener('click', () => {
                const amount = parseFloat(depositAmountInput.value);
                if (isNaN(amount) || amount <= 0) {
                    alert("Please enter a valid amount");
                    return;
                }

                const newRequestRef = requestsRef.push();
                newRequestRef.set({
                    amount: amount,
                    type: 'deposit',
                    status: 'Pending',
                    timestamp: firebase.database.ServerValue.TIMESTAMP
                });

                const upiString = `https://cdn0030.qrcodechimp.com/qr/PROD/68935c68903938335e7424db/fm/img_20250806_191623.png?v=1754488046091`;
                
                qrCodeContainer.innerHTML = '';
                new QRCode(qrCodeContainer, { text: upiString, width: 200, height: 200 });
                qrAmountDisplay.textContent = `‚Çπ${amount.toFixed(2)}`;
                depositModal.style.display = 'none';
                qrCodeModal.style.display = 'block';
            });
            
            processWithdrawalBtn.addEventListener('click', () => {
                const amount = parseFloat(withdrawalAmountInput.value);
                const upiId = userUpiIdInput.value.trim();

                if (isNaN(amount) || amount <= 0) {
                    alert("Please enter a valid amount to withdraw");
                    return;
                }
                if (upiId === "") {
                    alert("‡§ï‡•É‡§™‡§Ø‡§æ ‡§Ö‡§™‡§®‡•Ä UPI ID ‡§°‡§æ‡§≤‡•á‡§Ç‡•§");
                    return;
                }
                if (amount > walletBalance) {
                    alert("‡§Ü‡§™‡§ï‡•á ‡§ñ‡§æ‡§§‡•á ‡§Æ‡•á‡§Ç ‡§Ö‡§™‡§∞‡•ç‡§Ø‡§æ‡§™‡•ç‡§§ ‡§¨‡•à‡§≤‡•á‡§Ç‡§∏ ‡§π‡•à‡•§");
                    return;
                }
                
                const newRequestRef = requestsRef.push();
                newRequestRef.set({
                    amount: amount,
                    upiId: upiId,
                    type: 'withdrawal',
                    status: 'Pending',
                    timestamp: firebase.database.ServerValue.TIMESTAMP
                }).then(() => {
                    walletRef.set(walletBalance - amount);
                    withdrawalMessage.textContent = "Your withdrawal request has been successfully sent";
                    withdrawalAmountInput.value = '';
                    userUpiIdInput.value = '';
                    setTimeout(() => {
                        withdrawalModal.style.display = 'none';
                    }, 3000);
                }).catch((error) => {
                    console.error("‡§Ö‡§®‡•Å‡§∞‡•ã‡§ß ‡§≠‡•á‡§ú‡§®‡•á ‡§Æ‡•á‡§Ç ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø ‡§π‡•Å‡§à:", error);
                    alert("‡§Ö‡§®‡•Å‡§∞‡•ã‡§ß ‡§≠‡•á‡§ú‡§®‡•á ‡§Æ‡•á‡§Ç ‡§ï‡•ã‡§à ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø ‡§π‡•Å‡§à‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡•Å‡§®‡§É ‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡•á‡§Ç‡•§");
                });
            });
        };
    </script>
</body>
</html>